!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.LogicRule={})}(this,function(t){"use strict";var n=function(){function t(n){this.rules=[],"function"==typeof n&&(this.checkCb=t.getCheckCb(n))}return t.getCheckCb=function(t){return"function"==typeof t?t:function(){return!!t}},t.only=function(t){throw Error("only("+t+") method is not implemented")},t.and=function(t,n){throw Error("and("+t+","+n+") method is not implemented")},t.not=function(t){throw Error("not("+t+") method is not implemented")},t.or=function(t,n){throw Error("or("+t+", "+n+") method is not implemented")},t.prototype.add=function(t){this.rules.push(t)},t.prototype.and=function(n){return n?t.and(this,n):this},t.prototype.or=function(n){return n?t.or(this,n):this},t.prototype.not=function(){return t.not(this)},t}(),e=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then},r=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n.prototype.execute=function(){var t=this.rules[0],n=this.rules[1];if(!t||!n)throw Error("The rule cannot be empty");var r=t.execute(),o=n.execute();return e(r)||e(o)?Promise.all([r,o]).then(function(t){return t[0]&&t[1]}):t.execute()&&n.execute()},n}(n);n.and=function(t,n){var e=new o;return e.add(t),e.add(n),e};var u=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}
}(),i=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return u(n,t),n.prototype.execute=function(){var t=this.rules[0];if(!t)return!1;var n=t.execute();return e(n)?Promise.resolve(n).then(function(t){return!t}):!t.execute()},n}(n);n.not=function(t){var n=new i;return n.add(t),n};var c=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),f=function(t){function n(n){return t.call(this,n)||this}return c(n,t),n.prototype.execute=function(){return this.checkCb()},n}(n);n.only=function(t){return new f(this.getCheckCb(t))};var p=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return p(n,t),n.prototype.execute=function(){var t=this.rules[0],n=this.rules[1];if(!t||!n)throw Error("The rule cannot be empty");var r=t.execute(),o=n.execute();return e(r)||e(o)?Promise.all([r,o]).then(function(t){return t[0]||t[1]}):t.execute()||n.execute()},n}(n);n.or=function(t,n){var e=new s;return e.add(t),e.add(n),e},require("./lib/promise.auto.js");var a={Rule:n,AndRule:o,OrRule:s,NotRule:i,OnlyRule:f};t.Rule=n,t.AndRule=o,t.OrRule=s,t.NotRule=i,t.OnlyRule=f,t.default=a,Object.defineProperty(t,"__esModule",{value:!0})});